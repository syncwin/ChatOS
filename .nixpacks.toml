# Nixpacks configuration for ChatOS
# Force Nixpacks to use Node.js provider and prevent Deno detection
# Explicitly disable Deno detection

[providers]
node = "18"

[build]
provider = "node"

# Explicitly disable other providers
[providers.deno]
enabled = false

[providers.python]
enabled = false

[providers.go]
enabled = false

[phases.setup]
nixPkgs = ["nodejs_18", "npm"]

[phases.install]
cmds = ["npm ci"]

[phases.build]
cmds = ["npm run build"]

[phases.start]
cmd = "npm run preview"

[variables]
NODE_ENV = "production"
NIXPACKS_NO_CACHE = "1"