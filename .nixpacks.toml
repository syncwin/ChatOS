# Nixpacks configuration for ChatOS
# Force Nixpacks to use Node.js provider and prevent Deno detection
# Explicitly disable Deno detection

[providers]
node = "18"

[build]
provider = "node"

[phases.setup]
nixPkgs = ["nodejs_18", "npm"]

[phases.install]
cmds = ["npm ci"]

[phases.build]
cmds = ["npm run build"]

[phases.start]
cmd = "npm run preview"

[variables]
NODE_ENV = "production"
NIXPACKS_NO_CACHE = "1"